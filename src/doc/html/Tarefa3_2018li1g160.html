<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa3_2018li1g160</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Tarefa3_2018li1g160.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa3_2018li1g160</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Testes</a></li><li><a href="#g:2">Fun&#231;&#245;es principais da Tarefa 3.</a></li><li><a href="#g:3">Fun&#231;&#245;es auxiliares:</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o Tarefa 3:</h1><p>Este m&#243;dulo consiste em duas fun&#231;&#245;es (comprime e descomprime).
  A fun&#231;&#227;o comprime pega no Estado do jogo atual e codifica-o para uma String.
  A fun&#231;&#227;o descomprime pega na String codificada e descodifica-a, retribuindo um Estado, correspondente ao estado do jogo na altura
em que este foi codificado.</p><h1>Objetivos e estrat&#233;gias utilizadas (comprime):</h1><p>Na compress&#227;o do estado do jogo, comprimimos o mapa, os jogadores e os disparos individualmente, separando-os por um carat&#233;r &#250;nico.
  Na compress&#227;o do mapa, comprimimos linha a linha. A estrat&#233;gia utilizada foi:
  (1) Identificar um bloco;
  (2) Se o bloco seguinte f&#244;r igual, aumentar um contador, e voltar a (1). Caso contr&#225;rio, retribur uma letra identificativa do
  bloco em quest&#227;o, precedida do n&#250;mero do contador.
  Na compress&#227;o dos jogadores e dos disparos, separ&#225;mos cada um por um carat&#233;r espec&#237;fico e, dentro de cada jogador/disparo,
separ&#225;mos as suas componentes por outro carat&#233;r.</p><h1>Objetivos e estrat&#233;gias utilizadas (descomprime):</h1><p>Na descompress&#227;o come&#231;&#225;mos por separar o mapa, os jogadores e os disparos, usando uma fun&#231;&#227;o para descomprimir cada uma destas
componentes do Estado.
  De seguida, procedemos &#224; descompress&#227;o do mapa, jogadores e disparos.
  Na descompress&#227;o do mapa descodific&#225;mos uma linha de cada vez, replicando o mapa conforme este tinha sido comprimido.
  No descompress&#227;o dos jogadores e dos disparos, come&#231;&#225;mos por separar estes individualmente, de forma a n&#227;o haver conflito de
carateres, e aplic&#225;mos o processo inverso da compress&#227;o.</p><h1>Conclus&#227;o</h1><p>Concluindo, ach&#225;mos que o objetivo foi cumprido, visto que atingimos uma taxa de compress&#227;o m&#233;dia de 95% em diversos testes e n&#227;o
falhou a rela&#231;&#227;o (descomprime (comprime e) = e) em nenhum deles.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:testesT3">testesT3</a> :: [<a href="LI11819.html#t:Estado">Estado</a>]</li><li class="src short"><a href="#v:comprime">comprime</a> :: <a href="LI11819.html#t:Estado">Estado</a> -&gt; String</li><li class="src short"><a href="#v:comprimirMapa">comprimirMapa</a> :: <a href="LI11819.html#t:Mapa">Mapa</a> -&gt; String</li><li class="src short"><a href="#v:comprimirLinhaMapa">comprimirLinhaMapa</a> :: [[<a href="LI11819.html#t:Peca">Peca</a>]] -&gt; String</li><li class="src short"><a href="#v:auxComprimirMapa">auxComprimirMapa</a> :: [<a href="LI11819.html#t:Peca">Peca</a>] -&gt; String</li><li class="src short"><a href="#v:interpretaBloco">interpretaBloco</a> :: <a href="LI11819.html#t:Peca">Peca</a> -&gt; String</li><li class="src short"><a href="#v:comprimirVariosJogadores">comprimirVariosJogadores</a> :: [<a href="LI11819.html#t:Jogador">Jogador</a>] -&gt; String</li><li class="src short"><a href="#v:comprimirUmJogador">comprimirUmJogador</a> :: <a href="LI11819.html#t:Jogador">Jogador</a> -&gt; String</li><li class="src short"><a href="#v:stringPosicaoJogador">stringPosicaoJogador</a> :: <a href="LI11819.html#t:PosicaoGrelha">PosicaoGrelha</a> -&gt; String</li><li class="src short"><a href="#v:stringDirecaoJogador">stringDirecaoJogador</a> :: <a href="LI11819.html#t:Direcao">Direcao</a> -&gt; String</li><li class="src short"><a href="#v:stringVidLasChoqJogador">stringVidLasChoqJogador</a> :: Int -&gt; Int -&gt; Int -&gt; String</li><li class="src short"><a href="#v:comprimirTodosDisparos">comprimirTodosDisparos</a> :: [<a href="LI11819.html#t:Disparo">Disparo</a>] -&gt; String</li><li class="src short"><a href="#v:comprimirDisparo">comprimirDisparo</a> :: <a href="LI11819.html#t:Disparo">Disparo</a> -&gt; String</li><li class="src short"><a href="#v:stringJogPosDisp">stringJogPosDisp</a> :: Int -&gt; <a href="LI11819.html#t:PosicaoGrelha">PosicaoGrelha</a> -&gt; String</li><li class="src short"><a href="#v:stringJogDisp">stringJogDisp</a> :: Int -&gt; String</li><li class="src short"><a href="#v:stringDirDisp">stringDirDisp</a> :: <a href="LI11819.html#t:Direcao">Direcao</a> -&gt; String</li><li class="src short"><a href="#v:stringTempoDisp">stringTempoDisp</a> :: <a href="LI11819.html#t:Ticks">Ticks</a> -&gt; String</li><li class="src short"><a href="#v:descomprime">descomprime</a> :: String -&gt; <a href="LI11819.html#t:Estado">Estado</a></li><li class="src short"><a href="#v:descomprimeMapa">descomprimeMapa</a> :: String -&gt; <a href="LI11819.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:descomprimeLinhaMapa">descomprimeLinhaMapa</a> :: String -&gt; [<a href="LI11819.html#t:Peca">Peca</a>]</li><li class="src short"><a href="#v:interpretaCharBloco">interpretaCharBloco</a> :: Char -&gt; <a href="LI11819.html#t:Peca">Peca</a></li><li class="src short"><a href="#v:descomprimeJogadores">descomprimeJogadores</a> :: String -&gt; [<a href="LI11819.html#t:Jogador">Jogador</a>]</li><li class="src short"><a href="#v:descomprimeUmJogador">descomprimeUmJogador</a> :: String -&gt; <a href="LI11819.html#t:Jogador">Jogador</a></li><li class="src short"><a href="#v:dcPosx">dcPosx</a> :: String -&gt; Int</li><li class="src short"><a href="#v:dcPosy">dcPosy</a> :: String -&gt; Int</li><li class="src short"><a href="#v:dcDirecao">dcDirecao</a> :: String -&gt; <a href="LI11819.html#t:Direcao">Direcao</a></li><li class="src short"><a href="#v:dcVidas">dcVidas</a> :: String -&gt; Int</li><li class="src short"><a href="#v:dcLasers">dcLasers</a> :: String -&gt; Int</li><li class="src short"><a href="#v:dcChoques">dcChoques</a> :: String -&gt; Int</li><li class="src short"><a href="#v:interpretaCharDirecao">interpretaCharDirecao</a> :: Char -&gt; <a href="LI11819.html#t:Direcao">Direcao</a></li><li class="src short"><a href="#v:descomprimeDisparos">descomprimeDisparos</a> :: String -&gt; [<a href="LI11819.html#t:Disparo">Disparo</a>]</li><li class="src short"><a href="#v:descomprimeUmDisparo">descomprimeUmDisparo</a> :: String -&gt; <a href="LI11819.html#t:Disparo">Disparo</a></li><li class="src short"><a href="#v:dcJogadorOuTicks">dcJogadorOuTicks</a> :: String -&gt; Int</li></ul></div><div id="interface"><h1 id="g:1">Testes</h1><div class="top"><p class="src"><a id="v:testesT3" class="def">testesT3</a> :: [<a href="LI11819.html#t:Estado">Estado</a>] <a href="#v:testesT3" class="selflink">#</a></p><div class="doc"><p>Testes unit&#225;rios da Tarefa 3.</p><p>Cada teste &#233; um <code><a href="LI11819.html#t:Estado">Estado</a></code>.</p></div></div><h1 id="g:2">Fun&#231;&#245;es principais da Tarefa 3.</h1><div class="top"><p class="src"><a id="v:comprime" class="def">comprime</a> :: <a href="LI11819.html#t:Estado">Estado</a> -&gt; String <a href="#v:comprime" class="selflink">#</a></p><div class="doc"><p>Comprime um <code><a href="LI11819.html#t:Estado">Estado</a></code> para formato textual.</p><p><strong>NB:</strong> A fun&#231;&#227;o <code>show</code> representa um <code><a href="LI11819.html#t:Estado">Estado</a></code> num formato textual facilmente leg&#237;vel mas extenso.</p><p><strong>NB:</strong> Uma boa solu&#231;&#227;o deve representar o <code><a href="LI11819.html#t:Estado">Estado</a></code> dado no m&#237;nimo n&#250;mero de caracteres poss&#237;vel.</p></div></div><div class="top"><p class="src"><a id="v:comprimirMapa" class="def">comprimirMapa</a> :: <a href="LI11819.html#t:Mapa">Mapa</a> -&gt; String <a href="#v:comprimirMapa" class="selflink">#</a></p><div class="doc"><p>Comprime o mapa para uma string</p></div></div><div class="top"><p class="src"><a id="v:comprimirLinhaMapa" class="def">comprimirLinhaMapa</a> :: [[<a href="LI11819.html#t:Peca">Peca</a>]] -&gt; String <a href="#v:comprimirLinhaMapa" class="selflink">#</a></p><div class="doc"><p>Comprime uma linha do mapa</p></div></div><div class="top"><p class="src"><a id="v:auxComprimirMapa" class="def">auxComprimirMapa</a> :: [<a href="LI11819.html#t:Peca">Peca</a>] -&gt; String <a href="#v:auxComprimirMapa" class="selflink">#</a></p><div class="doc"><p>Recebe uma lista de pe&#231;as iguais, e comprime-as, retribuindo apenas o numero de pe&#231;as e um identificador seu.
 | Se apenas receber uma pe&#231;a, retribui apenas o identificador da pe&#231;a.</p></div></div><div class="top"><p class="src"><a id="v:interpretaBloco" class="def">interpretaBloco</a> :: <a href="LI11819.html#t:Peca">Peca</a> -&gt; String <a href="#v:interpretaBloco" class="selflink">#</a></p><div class="doc"><p>Recebe um bloco e retribui uma string correspondente</p></div></div><div class="top"><p class="src"><a id="v:comprimirVariosJogadores" class="def">comprimirVariosJogadores</a> :: [<a href="LI11819.html#t:Jogador">Jogador</a>] -&gt; String <a href="#v:comprimirVariosJogadores" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o respons&#225;vel pela compress&#227;o do estado relativo de uma lista de Jogadore que recebe, devolvendo uma String</p></div></div><div class="top"><p class="src"><a id="v:comprimirUmJogador" class="def">comprimirUmJogador</a> :: <a href="LI11819.html#t:Jogador">Jogador</a> -&gt; String <a href="#v:comprimirUmJogador" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que se encarrega da compress&#227;o do Estado de um un&#237;co jogador, devolvendo uma String</p></div></div><h1 id="g:3">Fun&#231;&#245;es auxiliares:</h1><div class="top"><p class="src"><a id="v:stringPosicaoJogador" class="def">stringPosicaoJogador</a> :: <a href="LI11819.html#t:PosicaoGrelha">PosicaoGrelha</a> -&gt; String <a href="#v:stringPosicaoJogador" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe a posi&#231;ao de um jogador e a comprime, devolvendo uma String</p></div></div><div class="top"><p class="src"><a id="v:stringDirecaoJogador" class="def">stringDirecaoJogador</a> :: <a href="LI11819.html#t:Direcao">Direcao</a> -&gt; String <a href="#v:stringDirecaoJogador" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe a dire&#231;ao de um jogador e a comprime, devolvendo uma String</p></div></div><div class="top"><p class="src"><a id="v:stringVidLasChoqJogador" class="def">stringVidLasChoqJogador</a> :: Int -&gt; Int -&gt; Int -&gt; String <a href="#v:stringVidLasChoqJogador" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe as vidas, lasers e choques (dispon&#237;veis) de um jogador e os comprime devolvendo uma String</p></div></div><div class="top"><p class="src"><a id="v:comprimirTodosDisparos" class="def">comprimirTodosDisparos</a> :: [<a href="LI11819.html#t:Disparo">Disparo</a>] -&gt; String <a href="#v:comprimirTodosDisparos" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o respons&#225;vel pela compress&#227;o (vai devolver uma String) do estado relativo a um conjunto de v&#225;rios Disparos</p></div></div><div class="top"><p class="src"><a id="v:comprimirDisparo" class="def">comprimirDisparo</a> :: <a href="LI11819.html#t:Disparo">Disparo</a> -&gt; String <a href="#v:comprimirDisparo" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que se encarrega da compress&#227;o (para uma String) de um disparo</p></div></div><div class="top"><p class="src"><a id="v:stringJogPosDisp" class="def">stringJogPosDisp</a> :: Int -&gt; <a href="LI11819.html#t:PosicaoGrelha">PosicaoGrelha</a> -&gt; String <a href="#v:stringJogPosDisp" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe a identifica&#231;&#227;o do Jogador e a Posi&#231;&#227;o do disparo e comprime ambos devolvendo uma String</p></div></div><div class="top"><p class="src"><a id="v:stringJogDisp" class="def">stringJogDisp</a> :: Int -&gt; String <a href="#v:stringJogDisp" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe a identifica&#231;&#227;o do Jogador respons&#225;vel pelo disparo e a comprime devolvendo numa String</p></div></div><div class="top"><p class="src"><a id="v:stringDirDisp" class="def">stringDirDisp</a> :: <a href="LI11819.html#t:Direcao">Direcao</a> -&gt; String <a href="#v:stringDirDisp" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe a dire&#231;&#227;o em que disparo &#233; feito e a comprime, devolvendo numa String</p></div></div><div class="top"><p class="src"><a id="v:stringTempoDisp" class="def">stringTempoDisp</a> :: <a href="LI11819.html#t:Ticks">Ticks</a> -&gt; String <a href="#v:stringTempoDisp" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe os Ticks (unidades de tempo) de um disparo Choque e os comprime devolvendo numa String</p></div></div><div class="top"><p class="src"><a id="v:descomprime" class="def">descomprime</a> :: String -&gt; <a href="LI11819.html#t:Estado">Estado</a> <a href="#v:descomprime" class="selflink">#</a></p><div class="doc"><p>Descomprime um <code><a href="LI11819.html#t:Estado">Estado</a></code> no formato textual utilizado pela fun&#231;&#227;o <code><a href="Tarefa3_2018li1g160.html#v:comprime">comprime</a></code>.</p><p><strong>NB:</strong> A fun&#231;&#227;o <code><a href="Tarefa3_2018li1g160.html#v:comprime">comprime</a></code> &#233; v&#225;lida de for poss&#237;vel recuperar o <code><a href="LI11819.html#t:Estado">Estado</a></code> utilizando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g160.html#v:descomprime">descomprime</a></code>, i.e.:</p><pre>descomprime . comprime = id</pre><p><strong>NB:</strong> Esta propriedade &#233; particularmente v&#225;lida para a solu&#231;&#227;o pr&#233;-definida:</p><pre>read . show = id</pre></div></div><div class="top"><p class="src"><a id="v:descomprimeMapa" class="def">descomprimeMapa</a> :: String -&gt; <a href="LI11819.html#t:Mapa">Mapa</a> <a href="#v:descomprimeMapa" class="selflink">#</a></p><div class="doc"><p>Recebe um mapa comprimido (String) e retribui esse mapa descomprimido (Mapa)</p></div></div><div class="top"><p class="src"><a id="v:descomprimeLinhaMapa" class="def">descomprimeLinhaMapa</a> :: String -&gt; [<a href="LI11819.html#t:Peca">Peca</a>] <a href="#v:descomprimeLinhaMapa" class="selflink">#</a></p><div class="doc"><p>Recebe apenas uma linha de um mapa comprimido (String) e retribui essa mesma linha descomprimida ([Peca])</p></div></div><div class="top"><p class="src"><a id="v:interpretaCharBloco" class="def">interpretaCharBloco</a> :: Char -&gt; <a href="LI11819.html#t:Peca">Peca</a> <a href="#v:interpretaCharBloco" class="selflink">#</a></p><div class="doc"><p>Recebe um carater (pa&#231;a comprimida) e devolve a pe&#231;a correspondente</p></div></div><div class="top"><p class="src"><a id="v:descomprimeJogadores" class="def">descomprimeJogadores</a> :: String -&gt; [<a href="LI11819.html#t:Jogador">Jogador</a>] <a href="#v:descomprimeJogadores" class="selflink">#</a></p><div class="doc"><p>Recebe os estados dos jogadores comprimidos (String) e descomprime-os, devolvendo [Jogador]</p></div></div><div class="top"><p class="src"><a id="v:descomprimeUmJogador" class="def">descomprimeUmJogador</a> :: String -&gt; <a href="LI11819.html#t:Jogador">Jogador</a> <a href="#v:descomprimeUmJogador" class="selflink">#</a></p><div class="doc"><p>Descomprime o estado de um so jogador</p></div></div><div class="top"><p class="src"><a id="v:dcPosx" class="def">dcPosx</a> :: String -&gt; Int <a href="#v:dcPosx" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe um String e devolve um n&#250;mero inteiro (que vai ser relativo &#225; Posi&#231;&#227;o)</p></div></div><div class="top"><p class="src"><a id="v:dcPosy" class="def">dcPosy</a> :: String -&gt; Int <a href="#v:dcPosy" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe um String e devolve um n&#250;mero inteiro (que vai ser relativo &#225; Posi&#231;&#227;o)</p></div></div><div class="top"><p class="src"><a id="v:dcDirecao" class="def">dcDirecao</a> :: String -&gt; <a href="LI11819.html#t:Direcao">Direcao</a> <a href="#v:dcDirecao" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe um String e devolve uma Dire&#231;&#227;o</p></div></div><div class="top"><p class="src"><a id="v:dcVidas" class="def">dcVidas</a> :: String -&gt; Int <a href="#v:dcVidas" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe um String e devolve um n&#250;mero inteiro (que vai ser relativo ao n&#250;mero de vidas que Jogador possui)</p></div></div><div class="top"><p class="src"><a id="v:dcLasers" class="def">dcLasers</a> :: String -&gt; Int <a href="#v:dcLasers" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe um String e devolve um n&#250;mero inteiro (que vai ser relativo ao n&#250;mero de lasers disponiveis do Jogador)</p></div></div><div class="top"><p class="src"><a id="v:dcChoques" class="def">dcChoques</a> :: String -&gt; Int <a href="#v:dcChoques" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe um String e devolve um n&#250;mero inteiro (que vai ser relativo ao n&#250;mero de choques disponiveis do Jogador)</p></div></div><div class="top"><p class="src"><a id="v:interpretaCharDirecao" class="def">interpretaCharDirecao</a> :: Char -&gt; <a href="LI11819.html#t:Direcao">Direcao</a> <a href="#v:interpretaCharDirecao" class="selflink">#</a></p><div class="doc"><p>Recebe um carater e devolve uma direcao, consoante o carater</p></div></div><div class="top"><p class="src"><a id="v:descomprimeDisparos" class="def">descomprimeDisparos</a> :: String -&gt; [<a href="LI11819.html#t:Disparo">Disparo</a>] <a href="#v:descomprimeDisparos" class="selflink">#</a></p><div class="doc"><p>Recebe os estados dos disparos comprimidos (String) e descomprime-os, devolvendo [Disparo]</p></div></div><div class="top"><p class="src"><a id="v:descomprimeUmDisparo" class="def">descomprimeUmDisparo</a> :: String -&gt; <a href="LI11819.html#t:Disparo">Disparo</a> <a href="#v:descomprimeUmDisparo" class="selflink">#</a></p><div class="doc"><p>Descomprime o estado de um so disparo </p></div></div><div class="top"><p class="src"><a id="v:dcJogadorOuTicks" class="def">dcJogadorOuTicks</a> :: String -&gt; Int <a href="#v:dcJogadorOuTicks" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que recebe uma String e devolve um n&#250;mero inteiro</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>